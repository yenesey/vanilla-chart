{"version":3,"sources":["./src/vanilla-chart.js"],"names":["_min","Math","min","_max","max","_round","round","_abs","abs","_listen","target","events","handler","listen","i","length","removeEventListener","addEventListener","defaults","padding","minimapHeightRel","minimapBandSize","colors","background","minimap","minimapFrame","minimapDrag","label","labelBackground","transition","run","duration","ts","from","to","pos","onComplete","VanillaChart","containerId","data","this","names","options","container","document","getElementById","Error","canvas","appendChild","createElement","ctx","getContext","font","window","getComputedStyle","vw","vh","select","controls","h","width","left","right","rlLeft","rlRight","a","b","_transitions","Object","create","graph","pointer","setData","clientWidth","height","clientHeight","floor","draw","bind","move","mousetouch","pointerX","pointerY","_drag","mode","start","runBnd","doneBnd","_getMinimapRect","self","mm","margin","y","x","w","_calcMinimap","scaleView","dataLength","_iterateControls","cb","pad","col","_inRect","r","_getColumn","name","columns","_fontShift","delta","bold","replace","m","p1","Number","_getDateText","unixDate","part","String","prototype","substr","apply","Date","_drawRoundedRect","corners","methods","moveTo","_drawGraph","useMinimap","lineWidth","grid","maxY","symbolSize","measureText","scaleX","scaleY","Y0","visCount","lineJoin","visible","beginPath","strokeStyle","dataY","_a","_b","lineTo","stroke","msg","msgWidth","fillStyle","fillText","stepY","toString","labelSize","dense","dataX","arc","PI","fill","_labelHeight","bkColor","borderColor","labelColor","date","dateLabel","dateWidth","obj","key","value","color","p","_x","_drawLabelBox","_draw","sb","fillRect","initTransition","getMaxY","textBaseline","_drawControls","trns","result","trn","performance","now","requestAnimationFrame","e","getBoundingClientRect","type","targetTouches","clientX","clientY","top","event","style","cursor","sbSize","preventDefault","setVisibility","TypeError","k","vis","column","running","call"],"mappings":"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","sourcesContent":["(function() {\n\n'use strict'\n\nvar \n\t_min = Math.min, \n\t_max = Math.max,\n\t_round = Math.round,\n\t_abs = Math.abs\n\nfunction _listen(target, events, handler, listen) {\n\tfor (var i = 0; i < events.length; i++)\t\n\t\t(listen === false)\n\t\t? target.removeEventListener(events[i], handler)\n\t\t: target.addEventListener(events[i], handler)\n}\n\nvar defaults = {\n\tpadding: 5,\n\tminimapHeightRel: 0.14,\n\tminimapBandSize: 12,\n\tcolors: {\n\t\tbackground: '#fff',\n\t\tminimap: '#f4f8ff',\n\t\tminimapFrame: '#c8dde8',\n\t\tminimapDrag: 'rgba(200, 190, 190, 0.2)',\n\t\tlabel: '#666',\n\t\tlabelBackground: 'rgba(240, 240, 250, 0.82)'\n\t}\n}\n\nvar transition = {\n\trun: false,\n\tduration: 250,\n\tts: 0,\n\tfrom: 0,\n\tto: 0,\n\tpos: 0,\n\tonComplete: null\n}\n\n// ----------------------------------------------\n\nfunction VanillaChart(containerId, data) {\n/*\n\tthe data contract is:\n\t\tcolors: {y0: \"#3DC23F\", y1: \"#F34C44\"}\n\t\tcolumns: (3) [Array(113), Array(113), Array(113)]\n\t\tnames: {y0: \"#0\", y1: \"#1\"}\n\t\ttypes: {y0: \"line\", y1: \"line\", x: \"x\"}\n*/\n\tthis.data = null\n\tthis.names = {}\n\tthis.options = defaults\n\tthis.container = document.getElementById(containerId)\n\tif (!this.container) throw new Error('chart container not found!')\n\tthis.canvas = this.container.appendChild(document.createElement('canvas'))\n\tthis.ctx = this.canvas.getContext('2d')\n\tthis.ctx.font = window.getComputedStyle(this.container, null).font\n\tthis.font = this.ctx.font\n\tthis.vw = 0\n\tthis.vh = 0\n\tthis.select = -1\n\n\tthis.controls = {\n\t\th: 0,\n\t\tvh: 0,\n\t\twidth: 0\n\t}\n\n\tthis.minimap = {\n\t\tleft: 0,\n\t\tright: 0,\n\t\trlLeft: 0.75,\n\t\trlRight: 1,\n\t\ta: 0,\n\t\tb: 0,\n\t\tvh: 0\n\t}\n\n\tthis._transitions = {\n\t\tminimap: Object.create(transition),\n\t\tgraph: Object.create(transition),\n\t\tpointer: Object.create(transition)\n\t}\n\n\tthis.setData(data)\n\n\tvar _justifySize = function() {\n\t\tthis.vw = this.canvas.width  = this.container.clientWidth\n\t\tthis.vh = this.canvas.height = this.container.clientHeight\n\t\tthis.minimap.left = _round(this.vw * this.minimap.rlLeft)\n\t\tthis.minimap.right = _round(this.vw * this.minimap.rlRight)\n\t\tthis.minimap.vh = _round(this.vh * this.options.minimapHeightRel)\n\t\tthis.controls.vh = (this.controls.h + this.options.padding*2) * (1 + Math.floor(this.controls.width/this.vw))\n\t\tthis.select = -1\n\t\tthis.draw()\n\t}\n\n\t_listen(window, ['resize','load'], _justifySize.bind(this))\n\t_listen(this.canvas, ['mousemove', 'toucmove'], this.move.bind(this))\n\t_listen(this.canvas, ['mousedown', 'touchstart'], this.mousetouch.bind(this))\n}\n\n(function() {\n\t// helpers (a spike of private data/methods ):\n\tvar pointerX = 0\n\tvar pointerY = 0\n\tvar _drag = {\n\t\tmode: 0,\n\t\tstart: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\trunBnd: null,\n\t\tdoneBnd: null\n\t}\n\t\n\tfunction _getMinimapRect(self) {\n\t\tvar mm = self.minimap\n\t\tvar margin = _round(mm.vh * 0.10)\n\t\treturn {\n\t\t\ty: self.vh - mm.vh + margin - self.controls.vh,\n\t\t\tx: mm.left,\n\t\t\tw: mm.right - mm.left,\n\t\t\th: mm.vh - margin * 2\n\t\t}\n\t}\n\n\tfunction _calcMinimap(self) {\n\t\tif (self.vw === 0) return\n\t\tvar mm = self.minimap\n\t\tvar scaleView = self.vw / (self.dataLength - 1)\n\t\tmm.rlLeft = mm.left / self.vw\n\t\tmm.rlRight = mm.right / self.vw\n\t\tmm.a = _round(mm.left / scaleView)\n\t\tmm.b = _round(mm.right / scaleView)\n\t}\n\n\tfunction _iterateControls(self, cb) {\n\t\tvar pad = self.options.padding\n\t\tvar controls = self.controls\n\t\tvar names = self.names\n\t\tvar x = pad, i = 0\n\t\tvar y = self.vh - controls.vh + pad\n\t\tfor (var col in self.data.names) {\n\t\t\tif (x + names[col].width + pad > self.vw) {\n\t\t\t\tx = pad\n\t\t\t\ty = y + controls.h + pad\n\t\t\t}\n\t\t\tif (cb) cb({x: x, y: y, w: names[col].width, h: controls.h - pad}, col)\n\t\t\tx = x + names[col].width + pad\n\t\t\ti++\n\t\t}\n\t\treturn i\n\t}\n\n\tfunction _inRect(x, y, r) {\n\t\treturn (r.x <= x && x <= r.x + r.w && r.y <= y && y <= r.y + r.h)\n\t}\n\n\tfunction _getPointingRegion(self, x, y) {\n\t\tvar r = _getMinimapRect(self)\n\t\tvar sb = self.options.minimapBandSize\n\t\tif (y < r.y) return 7\n\t\tif (_inRect(x, y, r)) {\n\t\t\tif (x < r.x + sb)\treturn 1\n\t\t\tif (x > r.x + r.w - sb)\treturn 2\n\t\t\treturn 3\n\t\t}\n\t\treturn 0\n\t}\n\n\tfunction _getColumn(data, name) {\n\t\tfor (var i = 0; i < data.columns.length; i++) {\n\t\t\tif (data.columns[i][0] === name) return data.columns[i]\n\t\t}\n\t\treturn null\n\t}\n\n\tfunction _transitions(trns) {\n\t\tvar result = false\n\t\tfor (var key in trns) {\n\t\t\tvar trn = trns[key]\n\t\t\tresult = result || trn.run\n\t\t\t// linear duration(ms) based transition \n\t\t\tif (trn.run) {\n\t\t\t\ttrn.pos = trn.from + (trn.to - trn.from) / trn.duration * (performance.now() - trn.ts) \n\t\t\t\tif ((trn.to > trn.from && trn.pos >= trn.to) || (trn.to < trn.from && trn.pos <= trn.to) || trn.to === trn.from  ) {\n\t\t\t\t\ttrn.run = false\n\t\t\t\t\ttrn.pos = trn.to\n\t\t\t\t\tif (trn.onComplete) trn.onComplete()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result\n\t} //_transitions\n\n\tfunction _dragRun(e) {\n\t\tthis.select = -1\n\t\tvar delta = 0\n\t\tif (e) {\n\t\t\tif (e.type === 'touchmove') e = e.targetTouches[0]\n\t\t \tdelta = e.clientX - _drag.start\n\t\t}\n\t\tvar mm = this.minimap\n\t\tvar sbSize = this.options.minimapBandSize\n\t\t\n\t\tif (_drag.mode & 4) delta = -delta //drag by body - reversal\n\t\tif (_drag.mode & 1) {\n\t\t\tmm.left = _drag.left + delta\n\t\t\tmm.left = _max(mm.left, 1)\n\t\t\tmm.left = _min(mm.left, mm.right - sbSize * 2 - 1)\n\t\t}\n\t\tif (_drag.mode & 2) {\n\t\t\tmm.right = _drag.right + delta \n\t\t\tmm.right = _min(mm.right, this.vw - 1)\n\t\t\tmm.right = _max(mm.right, mm.left + sbSize * 2 + 1)\n\t\t}\n\t\t_calcMinimap(this)\n\t\tthis.initTransition('graph', 'current', this.getMaxY(true) )\n\t}\n\n\tfunction _dragDone(e) {\n\t\t if (e.type !== 'touchmove') e.target.style.cursor='default'\n\t\t_listen(document, ['mousemove', 'touchmove'], _drag.runBnd, false)\n\t\t_listen(document, ['mouseup', 'touchend'], _drag.doneBnd, false)\n\t\t_drag.runBnd = null\n\t\t_drag.doneBnd = null\n\t\tthis.initTransition('minimap', 'current', 0, function(){_drag.mode = 0} )\n\t}\n\n\tfunction _fontShift(font, delta, bold) {\n\t\treturn font.replace(/(\\d*\\.?\\d+)px/, function(m, p1) {return (bold?'bold ':'') + Number(Number(p1)+delta)+'px' } )\n\t}\n\n\tfunction _getDateText(unixDate, part) {\n\t\treturn String.prototype.substr.apply((new Date(unixDate)), [[0, 3], [4, 11],\t[4, 6],\t[11, 4]][part])\n\t}\n\n\tfunction _drawRoundedRect(ctx, x, y, w, h, r, corners) {\n\t\tvar methods = ['arcTo', 'lineTo']\n\t\tcorners = corners || [0, 0, 0 ,0]\n\t\tctx.moveTo(x+r, y)\n\t\tctx[ methods[corners[0]] ](x+w, y,   x+w, y+h, r) \n\t\tctx[ methods[corners[1]] ](x+w, y+h, x,   y+h, r)\n\t\tctx[ methods[corners[2]] ](x,   y+h, x,   y,   r)\n\t\tctx[ methods[corners[3]] ](x,   y,   x+w, y,   r)\n\t\treturn ctx\n\t}\n\n\tfunction _drawLabelBox(ctx, x, data, visible, i, _labelHeight, bkColor, borderColor, labelColor, vw) {\n\t// displays info for 1, 2 and more named columns\n\t\tvar p = 10\n\t\tvar date = _getColumn(data, 'x')[i]\n\t\tvar dateLabel = _getDateText(date, 0) + ', ' + _getDateText(date, 2)\n\t\tvar dateWidth = ctx.measureText(dateLabel).width\n\t\tvar obj = {}\n\t\tvar width = 0\n\t\tfor (var key in data.names) {\n\t\t\tif (visible[key].visible) {\n\t\t\t\tobj[key] = {}\n\t\t\t\tobj[key].name = data.names[key]\n\t\t\t\tobj[key].value = _getColumn(data, key)[i]\n\t\t\t\tobj[key].width = _max(ctx.measureText(obj[key].name).width, ctx.measureText(obj[key].value).width)\n\t\t\t\tobj[key].color = data.colors[key]\n\t\t\t\twidth += obj[key].width + p\n\t\t\t}\n\t\t}\n\t\twidth = _max(dateWidth, width) + p\n\t\tx = x - width / 2\n\t\tif (x < 0) x = 0\n\t\tif (x + width > vw) x = vw - width\n\n\t\tctx.fillStyle = bkColor\n\t\tctx.strokeStyle = borderColor\n\t\tctx.beginPath()\n\t\t_drawRoundedRect(ctx, x, 1, width, _labelHeight * 3 + p, 6).fill()\n\t\tctx.stroke()\n\n\t\tctx.fillStyle = labelColor\n\t\tctx.beginPath()\n\t\tctx.fillText(dateLabel, x + width/2 - dateWidth/2, _labelHeight + p/2)\n\n\t\tvar w = 0, _x = x\n\t\tvar font = ctx.font\n\t\tvar bold = _fontShift(ctx.font, 2, true)\n\t\tfor (key in obj) {\n\t\t\tctx.fillStyle = obj[key].color\n\t\t\tw = obj[key].width\n\t\t\tctx.font = bold\n\t\t\tctx.fillText(obj[key].value , _x + p,\t_labelHeight*2 + p\t)\n\t\t\tctx.font = font\n\t\t\tctx.fillText(obj[key].name ,  _x + p,\t_labelHeight*3 + p/1.2)\n\t\t\t_x = _x + w + 10\n\t\t}\n\t\tctx.fill()\n\t}\n\n\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\tfunction _drawGraph(self, y, height, useMinimap, lineWidth, grid, maxY) {\n\n\t\tvar ctx = self.ctx\n\t\tvar symbolSize = ctx.measureText('M').width\n\t\tif (grid)\theight = height - symbolSize - 8\n\t\tvar data = self.data, \n\t\t\tnames = self.names;\n\n\t\tvar left = 0, \n\t\t\tright = self.vw,\n\t\t\ta = 0,\n\t\t\tb = self.dataLength-1;\n\t\tif (useMinimap) {\n\t\t\ta = self.minimap.a,\n\t\t\tb = self.minimap.b,\n\t\t\tleft = self.minimap.left, \n\t\t\tright = self.minimap.right\n\t\t}\n\t\tvar\twidth = self.vw,\n\t\t\tscaleView = width / (self.dataLength - 1),\n\t\t\trlLeft = left / width,\n\t\t\trlRight = right / width,\n\t\t\tscaleX = (1 / (rlRight - rlLeft)),\n\t\t\tscaleY = height / maxY,\n\t\t\tY0 = y + height,\n\t\t\tvisCount = 0;\n\n\t\tctx.lineWidth = lineWidth\n\t\tctx.lineJoin = 'round'\n\t\tctx.font = self.font\n\t\tfor (var name in names) if (names[name].visible) {\n\t\t\tvisCount++\n\t\t\tctx.beginPath()\n\t\t\tctx.strokeStyle = data.colors[name]\n\t\t\tvar dataY = _getColumn(data, name)\n\t\t\t// [a..b] - no need offscreen drawing\n\t\t\tvar _a = _max(a-1, 0)\n\t\t\tvar _b = _min(b+1, self.dataLength-1)\n\t\t\tfor (var i = _a; i <= _b; i++) ctx.lineTo(\n\t\t\t\t(i * scaleView - left) * scaleX,\n\t\t\t\tY0 - dataY[i+1] * scaleY\n\t\t\t)\n\t\t\tctx.stroke()\n\t\t}\n\n\t\tif (grid && visCount === 0) {\n\t\t\tvar msg = 'No data to display'\n\t\t\tvar msgWidth = ctx.measureText(msg).width\n\t\t\tctx.fillStyle = self.options.colors.label\n\t\t\tctx.font = _fontShift(ctx.font, 4, false)\n\t\t\tctx.fillText(msg, width/2-msgWidth/2 , height/2)\n\t\t\treturn\n\t\t}\n\n\t\tif (!grid ) return\n\t\t//-------------------------Y - lines / labels\n\t\tctx.lineWidth = 0.2\n\t\tctx.beginPath()\n\t\tctx.strokeStyle = 'grey'\n\t\tvar stepY = maxY / 8\n\t\tctx.fillStyle = self.options.colors.label\n\t\tfor (var y = 0; y < 8; y++) {\n\t\t\tctx.moveTo(0, Y0 - y * stepY * scaleY)\n\t\t\tctx.lineTo(width, Y0 - y * stepY * scaleY)\n\t\t\tctx.fillText(_round(y * stepY).toString(), 5, Y0 - y * stepY  * scaleY )\n\t\t}\n\t\tctx.stroke()\n\n\t\t//-------------------------X - labels\n\t\tvar labelSize = symbolSize * 8\n\t\tvar dense =  _max(_abs(b - a) / width * labelSize, 1)\n\n\t\tvar dataX = _getColumn(data, 'x')\n\t\tfor (var i = a; i < b; i++) {\n\t\t\tvar label = _getDateText(dataX[i+1], 2)\n\t\t\tvar w = ctx.measureText(label).width\n\n\t\t\tif (i % _round(dense) === 0) {\n\t\t\t\tctx.fillStyle = self.options.colors.label\n\t\t\t\tctx.fillText(label, _round((i * scaleView - left) * scaleX - w / 2),\tY0 + symbolSize + 6)\n\t\t\t}\t\n\t\t}\n\t\t//-------------------------Selection\n\t\tif (self.select !== -1) {\n\t\t\tvar i = _round((left * scaleX + self.select) / (scaleX * scaleView))\n\t\t\tctx.beginPath()\n\t\t\tctx.strokeStyle = 'grey'\n\t\t\tctx.lineWidth = 0.5\n\t\t\tvar x = i * scaleView * scaleX - left * scaleX\n\t\t\tctx.moveTo(x, symbolSize * 5)\n\t\t\tctx.lineTo(x, height)\n\t\t\tctx.stroke()\n\n\t\t\tctx.lineWidth = lineWidth\n\t\t\tfor (var name in names) if (names[name].visible) {\n\t\t\t\tvar dataY = _getColumn(data, name)\n\t\t\t\tctx.beginPath()\n\t\t\t\tctx.strokeStyle = data.colors[name]\n\t\t\t\tctx.fillStyle = self.options.colors.background\n\t\t\t\tvar y = Y0 - dataY[i+1] * scaleY\n\t\t\t\tctx.arc(x, y, 4, 0, 2*Math.PI, false)\n\t\t\t\tctx.fill()\n\t\t\t\tctx.stroke()\n\t\t\t}\n\t\t\t\n\t\t\t_drawLabelBox(ctx, x, data, self.names, i+1, symbolSize * 1.4,  self.options.colors.labelBackground, self.options.colors.minimap ,self.options.colors.label, width)\n\t\t}\n\n\t}\t// _drawGraph\n\n\tfunction _drawMinimap(self) {\n\t\tvar ctx = self.ctx\n\t\tvar sb = self.options.minimapBandSize\n\t\tvar colors = self.options.colors\n\t\tvar r = _getMinimapRect(self)\n\n\t\tctx.beginPath()\n\t\tctx.fillStyle = colors.minimap\n\t\tctx.fillRect(0, r.y, r.x + sb, r.h)\n\t\tctx.fillRect(r.x + r.w - sb, r.y, self.vw - r.x - r.w + sb , r.h)\n\n\t\tctx.fillStyle = colors.minimapFrame\n\t\t_drawRoundedRect(ctx, r.x,            r.y, sb, r.h, 6, [1,1,0,0])\n\t\t_drawRoundedRect(ctx, r.x + r.w - sb, r.y, sb, r.h, 6, [0,0,1,1])\n\t\tctx.fill()\n\t\tctx.fillRect(r.x + sb, r.y, r.w-sb*2, 2)\n\t\tctx.fillRect(r.x + sb, r.y+r.h-2, r.w-sb*2, 2)\n\n\t\t_drawGraph(self,r.y, r.h, false, 1, false, self.getMaxY(false))\n\n\t\t//animation\n\t\tif (_drag.mode !== 0) {\n\t\t\tctx.beginPath()\n\t\t\tctx.fillStyle = colors.minimapDrag\n\t\t \tctx.arc(r.x + [0, sb/2, r.w-sb/2, r.w/2][_drag.mode], r.y + r.h/2, self._transitions.minimap.pos,   0, 2*Math.PI, false)\n\t\t\tctx.fill()\n\t\t}\n\t}\n\n\tfunction _drawControls(self) {\n\t\tvar ctx = self.ctx\n\t\tctx.font = _fontShift(self.font, 4)\n\t\tvar data = self.data\n\t\t_iterateControls(self, function(r, col){\n\t\t\tctx.beginPath()\n\t\t\tctx.fillStyle = self.options.colors.minimap\n\t\t\t_drawRoundedRect(ctx, r.x, r.y, r.w, r.h, r.h/2).fill()\n\t\t\tctx.textBaseline = 'middle'\n\t\t\tif (self.names[col].visible) {\n\t\t\t\tctx.beginPath()\n\t\t\t\tctx.fillStyle = data.colors[col]\n\t\t\t\tctx.arc(r.x + r.h/2, r.y+r.h/2, r.h/3, 0, 2*Math.PI, false)\n\t\t\t\tctx.fill()\n\n\t\t\t\tctx.font = _fontShift(self.font, 4, true)\n\t\t\t\tctx.beginPath()\n\t\t\t\tctx.fillStyle = '#fff'\n\t\t\t\tctx.fillText('\\u2713' , r.x + r.h*0.33, r.y + r.h*0.52)\n\t\t\t\tctx.font = _fontShift(self.font, 4)\n\t\t\t} else {\n\t\t\t\tctx.beginPath()\n\t\t\t\tctx.strokeStyle = data.colors[col]\n\t\t\t\tctx.arc(r.x + r.h/2, r.y+r.h/2, r.h/3, 0, 2*Math.PI, false)\n\t\t\t\tctx.stroke()\n\t\t\t}\n\t\t\tctx.fillStyle = data.colors[col]\n\t\t\tctx.beginPath()\t\n\t\t\tctx.fillText(data.names[col], r.x + r.h , r.y + r.h/2)\n\t\t\tctx.textBaseline = 'bottom'\n\t\t})\n\n\t}\n\n\tfunction _draw() {\n\t\tvar ctx = this.ctx\n\t\tctx.fillStyle = this.options.colors.background\n\t\tctx.fillRect(0, 0, this.vw, this.vh)\n\t\tctx.font = this.font\n\t\tif (this.minimap.b === 0 ) {\n\t\t\t_calcMinimap(this)\n\t\t\tthis.initTransition('graph', 'current', this.getMaxY(true) )\n\t\t}\n\n\t\t_drawControls(this)\n\t\t_drawMinimap(this)\n\t\n\t\tvar h = _round(this.vh - this.minimap.vh - this.controls.vh)\n\t\t_drawGraph(this, 0, h, true, 2, true, this._transitions.graph.pos)\n\t\t\n\t\tvar r = this._transitions.pointer.pos\n\t\tif (r > 0) {\n\t\t\tctx.beginPath()\n\t\t\tctx.fillStyle = 'rgba(200, 190, 190, 0.2)'\n\t\t\tctx.arc(pointerX, pointerY, r,   0, 2*Math.PI, false)\n\t\t\tif (r > 12)\tctx.arc(pointerX, pointerY, r-12,   0, 2*Math.PI, true)\n\t\t\tctx.fill()\n\t\t}\n\t\t\n\t\tif (_transitions(this._transitions)) this.draw() // -- re-call while transitions running\n\t}\n\t// helpers end\n\n\t//--------------------------------------------------------------------------------------\n\t// VanillaChart.prototype methods:\n\tthis.draw = function() {\n\t\trequestAnimationFrame(_draw.bind(this))\n\t}\n\n\tthis.move = function(e) {\n\t\tvar r = e.target.getBoundingClientRect()\n\t\tif (e.type === 'touchstart') e = e.targetTouches[0]\n\t\tvar x = e.clientX - r.left, y = e.clientY - r.top\n\t\tif (y < (this.vh - this.minimap.vh - this.controls.vh)) {\n\t\t\tthis.select = x\n\t\t\tthis.draw()\n\t\t}\n\t}\n\n\tthis.mousetouch\t= function(e) {\n\t\tif (_drag.runBnd || _drag.doneBnd) return\n\t\tvar r = e.target.getBoundingClientRect()\n\t\tvar event = e\n\t\tif (e.type === 'touchstart') e = e.targetTouches[0]\n\t\tpointerX = e.clientX - r.left\n\t\tpointerY = e.clientY - r.top\n\t\t\n\t\t_drag.mode = _getPointingRegion(this, pointerX, pointerY)\n\t\tif (_drag.mode > 0) {\n\t\t\te.target.style.cursor = 'w-resize'\n\t\t\t_drag.start = e.clientX\n\t\t\t_drag.left = this.minimap.left\n\t\t\t_drag.right = this.minimap.right\n\t\t\t_drag.runBnd = _dragRun.bind(this)\n\t\t\t_drag.doneBnd = _dragDone.bind(this)\n\t\t\t_listen(document, ['mousemove', 'touchmove'], _drag.runBnd)\n\t\t\t_listen(document, ['mouseup', 'touchend'], _drag.doneBnd)\n\t\t\tthis.initTransition('minimap', 'current', _round(this.minimap.vh / 2) )\n\t\t} else {\n\t\t\tvar self = this\n\t\t\t_iterateControls(this, function(r, col){\n\t\t\t\tif (_inRect(pointerX, pointerY, r)) {\n\t\t\t\t\tevent.preventDefault()\n\t\t\t\t\tself.setVisibility(col)\n\t\t\t\t\tself.initTransition('pointer', 'current', 50, function () { self._transitions.pointer.pos = 0}.bind(self)  )\n\t\t\t\t}\n\t\t\t})\n\n\t\t}\n\t}\n\n\tthis.setData = function(data) {\n\t\tthis.data = data\n\t\ttry {\n\t\t\tthis.dataLength = data.columns[0].length - 1\n\t\t}\tcatch (e)\t{\n\t\t\tthrow new TypeError('incorrect <inputData> format')\n\t\t}\n\t\tvar ctx = this.ctx\n\t\tctx.font = _fontShift(this.font, 4, true)\n\t\tthis.controls.h = _round(ctx.measureText('M').width * 3.5)\n\t\tthis.controls.width = 0\n\t\tthis.names = {}\n\t\tfor (var k in data.names)\t{\n\t\t\tvar w = ctx.measureText(data.names[k]).width + this.controls.h + this.options.padding * 2\n\t\t\tthis.controls.width += w\n\t\t\tthis.names[k] = {\n\t\t\t\tvisible: true, // visible by default\n\t\t\t\twidth: w - this.options.padding\n\t\t\t}\n\t\t}\n\t\tthis.initTransition('graph', 'current', this.getMaxY(true) )\n\t}\n\n\tthis.setVisibility = function(col, vis) {\n\t\tthis.names[col].visible = (typeof vis === 'undefined')? !this.names[col].visible : vis\n\t\tthis.initTransition('graph', 'current', this.getMaxY(true) )\n\t}\n\n\tthis.getMaxY = function(useMinimap) {\n\t\tvar max = 0\n\t\tvar a = useMinimap ? this.minimap.a : 0\n\t\tvar b = useMinimap ? this.minimap.b : this.dataLength - 1\n\t\tfor (var name in this.names) if (this.names[name].visible) {\n\t\t\tvar column = _getColumn(this.data, name)\n\t\t\tfor (var i = a; i <= b; i++)  max = _max(max, column[i+1])\n\t\t}\n\t\treturn max\n\t}\n\n\tthis.initTransition = function(key, from, to, onComplete) {\n\t\tvar trns = this._transitions\n\t\tvar trn = trns[key]\n\t\ttrn.from = (from === 'current')?trn.pos: from\n\t\ttrn.pos = trn.from\n\t\ttrn.to = to\n\t\ttrn.ts = performance.now()\n\t\ttrn.onComplete = onComplete\n\t\tvar running = false\n\t\tfor (var k in trns) running = running || trns[k].run\n\t\tif (!running) this.draw()\n\t\ttrn.run = true\n\t}\n\n\n}).call(VanillaChart.prototype)\n\nif (typeof window !== 'undefined') window.VanillaChart = VanillaChart\n\n})()\n"]}